<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lofi Stream - Architecture</title>
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <style>
    :root {
      --bg: #1a1a2e;
      --bg-secondary: #16213e;
      --accent: #e94560;
      --accent-secondary: #0f3460;
      --text: #eaeaea;
      --text-muted: #a0a0a0;
      --success: #4ecca3;
      --warning: #ffc107;
      --border: #2a2a4a;
      --youtube: #ff0000;
      --twitch: #9146ff;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding: 2rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin-bottom: 3rem;
      padding-bottom: 2rem;
      border-bottom: 1px solid var(--border);
    }

    h1 {
      font-size: 2.5rem;
      background: linear-gradient(135deg, var(--accent), #ff6b6b);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 0.5rem;
    }

    .subtitle {
      color: var(--text-muted);
      font-size: 1.1rem;
    }

    nav {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-top: 1.5rem;
      flex-wrap: wrap;
    }

    nav a {
      padding: 0.5rem 1rem;
      background: var(--bg-secondary);
      color: var(--text);
      text-decoration: none;
      border-radius: 6px;
      border: 1px solid var(--border);
      transition: all 0.2s;
    }

    nav a:hover, nav a.active {
      background: var(--accent);
      border-color: var(--accent);
    }

    section {
      margin-bottom: 3rem;
    }

    h2 {
      color: var(--accent);
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid var(--accent-secondary);
    }

    h3 {
      color: var(--text);
      margin: 1.5rem 0 0.75rem;
    }

    p {
      margin-bottom: 1rem;
      color: var(--text-muted);
    }

    .mermaid {
      background: var(--bg-secondary);
      padding: 1.5rem;
      border-radius: 8px;
      margin: 1rem 0;
      overflow-x: auto;
    }

    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin: 1.5rem 0;
    }

    .card {
      background: var(--bg-secondary);
      padding: 1.5rem;
      border-radius: 12px;
      border: 1px solid var(--border);
    }

    .card h4 {
      color: var(--accent);
      margin-bottom: 0.75rem;
      font-size: 1.1rem;
    }

    .card p {
      font-size: 0.95rem;
    }

    .tech-stack {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1rem;
      margin: 1rem 0;
    }

    .tech-item {
      background: var(--bg-secondary);
      padding: 1rem;
      border-radius: 8px;
      border-left: 3px solid var(--accent);
    }

    .tech-item h5 {
      color: var(--text);
      margin-bottom: 0.5rem;
    }

    .tech-item code {
      display: block;
      margin-top: 0.5rem;
      font-size: 0.85rem;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1rem 0;
      background: var(--bg-secondary);
      border-radius: 8px;
      overflow: hidden;
    }

    th, td {
      padding: 0.75rem 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    th {
      background: var(--accent-secondary);
      color: var(--text);
      font-weight: 600;
    }

    td {
      color: var(--text-muted);
    }

    tr:last-child td {
      border-bottom: none;
    }

    code {
      background: var(--accent-secondary);
      padding: 0.2rem 0.4rem;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 0.9em;
    }

    pre {
      background: var(--bg-secondary);
      padding: 1rem;
      border-radius: 8px;
      overflow-x: auto;
      margin: 1rem 0;
    }

    pre code {
      background: none;
      padding: 0;
    }

    .command-block {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 8px;
      margin: 1rem 0;
      overflow: hidden;
    }

    .command-header {
      background: var(--accent-secondary);
      padding: 0.5rem 1rem;
      font-weight: 600;
      font-size: 0.9rem;
    }

    .command-body {
      padding: 1rem;
    }

    .command-body code {
      display: block;
      white-space: pre-wrap;
      word-break: break-all;
    }

    .port-diagram {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
      margin: 1rem 0;
    }

    .port-box {
      background: var(--bg-secondary);
      border: 2px solid var(--border);
      border-radius: 8px;
      padding: 1rem;
      text-align: center;
      min-width: 120px;
    }

    .port-box.youtube {
      border-color: var(--youtube);
    }

    .port-box.twitch {
      border-color: var(--twitch);
    }

    .port-number {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--accent);
    }

    .port-label {
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    footer {
      text-align: center;
      padding-top: 2rem;
      border-top: 1px solid var(--border);
      color: var(--text-muted);
    }

    footer a {
      color: var(--accent);
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <header>
    <h1>Architecture</h1>
    <p class="subtitle">How lofi-stream projects live on a single server</p>
    <nav>
      <a href="index.html">Overview & Roadmap</a>
      <a href="architecture.html" class="active">Architecture</a>
    </nav>
  </header>

  <section id="overview">
    <h2>System Overview</h2>
    <p>Both YouTube and Twitch streams run simultaneously on a single Hetzner CX22 VPS (2 vCPU, 2GB RAM). Each stream has its own isolated virtual display and audio pipeline.</p>

    <div class="mermaid">
flowchart TB
    subgraph internet["Internet"]
        GH["GitHub Pages<br/>(Static HTML)"]
        YT["YouTube Live"]
        TW["Twitch Live"]
    end

    subgraph hetzner["Hetzner VPS - 5.78.42.22"]
        subgraph systemd["systemd Services"]
            SVC1["lofi-stream.service"]
            SVC2["lofi-stream-twitch.service"]
        end

        subgraph youtube_stack["YouTube Stack"]
            direction TB
            X99["Xvfb :99<br/>1280x720"]
            C99["Chromium<br/>--user-data-dir=/tmp/chromium-yt"]
            PA99["PulseAudio<br/>virtual_speaker"]
            FF99["FFmpeg<br/>x11grab + pulse"]
        end

        subgraph twitch_stack["Twitch Stack"]
            direction TB
            X98["Xvfb :98<br/>1280x720"]
            C98["Chromium<br/>--user-data-dir=/tmp/chromium-twitch"]
            PA98["PulseAudio<br/>twitch_speaker"]
            FF98["FFmpeg<br/>x11grab + pulse"]
        end
    end

    GH -->|"HTTPS"| C99
    GH -->|"HTTPS"| C98

    SVC1 --> X99
    SVC1 --> C99
    SVC1 --> PA99
    SVC1 --> FF99

    SVC2 --> X98
    SVC2 --> C98
    SVC2 --> PA98
    SVC2 --> FF98

    X99 -->|"Video"| FF99
    C99 -->|"Audio"| PA99
    PA99 -->|"Audio"| FF99

    X98 -->|"Video"| FF98
    C98 -->|"Audio"| PA98
    PA98 -->|"Audio"| FF98

    FF99 -->|"RTMP :1935"| YT
    FF98 -->|"RTMP :1935"| TW
    </div>
  </section>

  <section id="tech-stack">
    <h2>Tech Stack</h2>

    <div class="card-grid">
      <div class="card">
        <h4>Frontend (GitHub Pages)</h4>
        <p>Static HTML/CSS/JS hosted for free on GitHub Pages. Each stream has its own repo with a unique theme.</p>
        <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
          <li style="color: var(--text-muted);">Pure HTML5/CSS3</li>
          <li style="color: var(--text-muted);">Web Audio API for generative music</li>
          <li style="color: var(--text-muted);">CSS animations (no JS needed)</li>
          <li style="color: var(--text-muted);">No build step or dependencies</li>
        </ul>
      </div>

      <div class="card">
        <h4>Server (Hetzner CX22)</h4>
        <p>Ubuntu 24.04 VPS running headless browsers that capture and stream to RTMP endpoints.</p>
        <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
          <li style="color: var(--text-muted);">2 vCPU AMD EPYC</li>
          <li style="color: var(--text-muted);">2GB RAM</li>
          <li style="color: var(--text-muted);">40GB NVMe SSD</li>
          <li style="color: var(--text-muted);">20TB traffic/mo</li>
        </ul>
      </div>

      <div class="card">
        <h4>Streaming Pipeline</h4>
        <p>Each stream uses isolated processes with separate virtual displays and audio sinks.</p>
        <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
          <li style="color: var(--text-muted);">Xvfb - virtual X11 display</li>
          <li style="color: var(--text-muted);">Chromium - headless browser</li>
          <li style="color: var(--text-muted);">PulseAudio - audio routing</li>
          <li style="color: var(--text-muted);">FFmpeg - capture & encode</li>
        </ul>
      </div>

      <div class="card">
        <h4>Process Management</h4>
        <p>systemd manages stream lifecycle with automatic restart on failure.</p>
        <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
          <li style="color: var(--text-muted);">Restart=always</li>
          <li style="color: var(--text-muted);">RestartSec=10</li>
          <li style="color: var(--text-muted);">WantedBy=multi-user.target</li>
          <li style="color: var(--text-muted);">Auto-start on boot</li>
        </ul>
      </div>
    </div>
  </section>

  <section id="resource-isolation">
    <h2>Resource Isolation</h2>
    <p>Each stream runs in its own isolated environment to prevent interference.</p>

    <h3>Display Isolation</h3>
    <div class="port-diagram">
      <div class="port-box youtube">
        <div class="port-number">:99</div>
        <div class="port-label">YouTube Display</div>
      </div>
      <div class="port-box twitch">
        <div class="port-number">:98</div>
        <div class="port-label">Twitch Display</div>
      </div>
    </div>

    <h3>Audio Isolation</h3>
    <div class="mermaid">
flowchart LR
    subgraph youtube["YouTube Audio Pipeline"]
        C1["Chromium :99"] -->|"Web Audio"| VS["virtual_speaker<br/>(null sink)"]
        VS -->|".monitor"| FF1["FFmpeg"]
    end

    subgraph twitch["Twitch Audio Pipeline"]
        C2["Chromium :98"] -->|"Web Audio"| TS["twitch_speaker<br/>(null sink)"]
        TS -->|".monitor"| FF2["FFmpeg"]
    end
    </div>

    <p>PulseAudio null sinks act as virtual speakers. Each Chromium instance outputs to its own sink, and FFmpeg captures from the <code>.monitor</code> source of that sink.</p>

    <h3>Browser Session Isolation</h3>
    <p>Each Chromium instance uses a separate user data directory to prevent session sharing:</p>

    <div class="command-block">
      <div class="command-header">YouTube Chromium</div>
      <div class="command-body">
        <code>chromium-browser --user-data-dir=/tmp/chromium-yt --no-sandbox ...</code>
      </div>
    </div>

    <div class="command-block">
      <div class="command-header">Twitch Chromium</div>
      <div class="command-body">
        <code>chromium-browser --user-data-dir=/tmp/chromium-twitch --no-sandbox ...</code>
      </div>
    </div>
  </section>

  <section id="data-flow">
    <h2>Data Flow</h2>

    <div class="mermaid">
sequenceDiagram
    participant GH as GitHub Pages
    participant Chrome as Chromium
    participant Xvfb as Xvfb (Virtual Display)
    participant Pulse as PulseAudio
    participant FFmpeg as FFmpeg
    participant Platform as YouTube/Twitch

    Note over Chrome,Xvfb: Startup Sequence
    Xvfb->>Xvfb: Create virtual display (:99 or :98)
    Pulse->>Pulse: Create null sink (virtual speaker)
    Chrome->>GH: Fetch lofi HTML page
    GH-->>Chrome: Return HTML/CSS/JS
    Chrome->>Chrome: Render visuals + generate audio

    Note over Chrome,Platform: Streaming Loop (24/7)
    loop Every frame (~30fps)
        Xvfb->>FFmpeg: x11grab captures frame
        Chrome->>Pulse: Web Audio outputs samples
        Pulse->>FFmpeg: Audio from .monitor source
        FFmpeg->>FFmpeg: Encode (libx264 + AAC)
        FFmpeg->>Platform: RTMP stream
    end

    Note over Chrome,Platform: Recovery (on failure)
    FFmpeg--xPlatform: Connection lost
    FFmpeg->>FFmpeg: Exit with error
    Note right of FFmpeg: systemd Restart=always
    FFmpeg->>Platform: Reconnect RTMP
    </div>
  </section>

  <section id="ffmpeg-config">
    <h2>FFmpeg Configuration</h2>

    <h3>YouTube Stream Settings</h3>
    <div class="command-block">
      <div class="command-header">ffmpeg command (simplified)</div>
      <div class="command-body">
        <code>ffmpeg \
  -f x11grab -video_size 1280x720 -framerate 24 -i :99 \
  -f pulse -i virtual_speaker.monitor \
  -c:v libx264 -preset ultrafast -tune zerolatency \
  -b:v 1500k -maxrate 1500k -bufsize 3000k \
  -g 48 -keyint_min 48 \
  -c:a aac -b:a 128k -ar 44100 \
  -f flv "rtmp://a.rtmp.youtube.com/live2/$YOUTUBE_KEY"</code>
      </div>
    </div>

    <h3>Twitch Stream Settings</h3>
    <div class="command-block">
      <div class="command-header">ffmpeg command (simplified)</div>
      <div class="command-body">
        <code>ffmpeg \
  -f x11grab -video_size 1280x720 -framerate 30 -i :98 \
  -f pulse -i twitch_speaker.monitor \
  -c:v libx264 -preset ultrafast -tune zerolatency \
  -b:v 2500k -maxrate 2500k -bufsize 5000k \
  -g 60 -keyint_min 60 \
  -c:a aac -b:a 160k -ar 44100 \
  -f flv "rtmp://live.twitch.tv/app/$TWITCH_KEY"</code>
      </div>
    </div>

    <h3>Key Settings Explained</h3>
    <table>
      <tr>
        <th>Setting</th>
        <th>Value</th>
        <th>Purpose</th>
      </tr>
      <tr>
        <td><code>-preset ultrafast</code></td>
        <td>ultrafast</td>
        <td>Minimize CPU usage (at cost of compression efficiency)</td>
      </tr>
      <tr>
        <td><code>-tune zerolatency</code></td>
        <td>zerolatency</td>
        <td>Reduce encoding latency for live streaming</td>
      </tr>
      <tr>
        <td><code>-b:v</code></td>
        <td>1500k-2500k</td>
        <td>Video bitrate (platform dependent)</td>
      </tr>
      <tr>
        <td><code>-g</code></td>
        <td>48-60</td>
        <td>Keyframe interval (2 sec at 24-30fps)</td>
      </tr>
      <tr>
        <td><code>-ar 44100</code></td>
        <td>44100 Hz</td>
        <td>Audio sample rate (platform requirement)</td>
      </tr>
    </table>
  </section>

  <section id="systemd">
    <h2>systemd Service Configuration</h2>

    <h3>Service Unit File Structure</h3>
    <pre><code>[Unit]
Description=Lofi Stream to YouTube
After=network-online.target
Wants=network-online.target

[Service]
Type=simple
User=root
Environment=DISPLAY=:99
Environment=PULSE_SERVER=unix:/run/user/0/pulse/native
Environment=XDG_RUNTIME_DIR=/run/user/0
ExecStart=/opt/lofi-stream/stream.sh
Restart=always
RestartSec=10
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target</code></pre>

    <h3>Critical Environment Variables</h3>
    <table>
      <tr>
        <th>Variable</th>
        <th>Value</th>
        <th>Why It's Needed</th>
      </tr>
      <tr>
        <td><code>DISPLAY</code></td>
        <td>:99 or :98</td>
        <td>Tell Chromium which Xvfb display to use</td>
      </tr>
      <tr>
        <td><code>PULSE_SERVER</code></td>
        <td>unix:/run/user/0/pulse/native</td>
        <td>FFmpeg needs this to find PulseAudio socket</td>
      </tr>
      <tr>
        <td><code>XDG_RUNTIME_DIR</code></td>
        <td>/run/user/0</td>
        <td>Required for PulseAudio under systemd</td>
      </tr>
    </table>
  </section>

  <section id="resource-usage">
    <h2>Resource Usage</h2>

    <h3>Dual-Stream Performance (CX22)</h3>
    <table>
      <tr>
        <th>Resource</th>
        <th>Usage</th>
        <th>Capacity</th>
        <th>Headroom</th>
      </tr>
      <tr>
        <td>CPU</td>
        <td>~70%</td>
        <td>2 vCPU</td>
        <td>30%</td>
      </tr>
      <tr>
        <td>RAM</td>
        <td>~1.2GB</td>
        <td>2GB</td>
        <td>800MB</td>
      </tr>
      <tr>
        <td>Network Out</td>
        <td>~4 Mbps</td>
        <td>1 Gbps</td>
        <td>Plenty</td>
      </tr>
      <tr>
        <td>Disk</td>
        <td>~4GB</td>
        <td>40GB</td>
        <td>36GB</td>
      </tr>
    </table>

    <h3>Per-Process Breakdown</h3>
    <div class="mermaid">
pie title CPU Usage by Process
    "FFmpeg (YT)" : 25
    "FFmpeg (TW)" : 25
    "Chromium (YT)" : 8
    "Chromium (TW)" : 8
    "Xvfb x2" : 2
    "PulseAudio" : 2
    "Idle" : 30
    </div>

    <h3>Scaling Estimates</h3>
    <table>
      <tr>
        <th>Streams</th>
        <th>Est. CPU</th>
        <th>Est. RAM</th>
        <th>Recommended Server</th>
      </tr>
      <tr>
        <td>1</td>
        <td>~35%</td>
        <td>~700MB</td>
        <td>CX22 (current)</td>
      </tr>
      <tr>
        <td>2</td>
        <td>~70%</td>
        <td>~1.2GB</td>
        <td>CX22 (current)</td>
      </tr>
      <tr>
        <td>3</td>
        <td>~105%</td>
        <td>~1.7GB</td>
        <td>CX32 (4 vCPU)</td>
      </tr>
      <tr>
        <td>4</td>
        <td>~140%</td>
        <td>~2.2GB</td>
        <td>CX32 (4 vCPU, 4GB)</td>
      </tr>
    </table>
  </section>

  <section id="debugging">
    <h2>Debugging & Operations</h2>

    <h3>Common Commands</h3>
    <div class="command-block">
      <div class="command-header">SSH to Server</div>
      <div class="command-body">
        <code>ssh -i ~/api-secrets/hetzner-server/id_ed25519 root@5.78.42.22</code>
      </div>
    </div>

    <div class="command-block">
      <div class="command-header">Check Service Status</div>
      <div class="command-body">
        <code>systemctl status lofi-stream lofi-stream-twitch</code>
      </div>
    </div>

    <div class="command-block">
      <div class="command-header">View Logs</div>
      <div class="command-body">
        <code># YouTube stream
journalctl -u lofi-stream -f

# Twitch stream
journalctl -u lofi-stream-twitch -f</code>
      </div>
    </div>

    <div class="command-block">
      <div class="command-header">Verify RTMP Connections</div>
      <div class="command-body">
        <code># Should show 2 connections to port 1935
ss -tn | grep 1935</code>
      </div>
    </div>

    <div class="command-block">
      <div class="command-header">Check Audio Pipeline</div>
      <div class="command-body">
        <code># List audio sinks
pactl list sinks short

# Check if FFmpeg is actually reading audio
pactl list source-outputs</code>
      </div>
    </div>

    <div class="command-block">
      <div class="command-header">Take Screenshot of Virtual Display</div>
      <div class="command-body">
        <code># YouTube display
DISPLAY=:99 import -window root /tmp/yt_screenshot.png

# Twitch display
DISPLAY=:98 import -window root /tmp/twitch_screenshot.png</code>
      </div>
    </div>

    <div class="command-block">
      <div class="command-header">Resource Monitoring</div>
      <div class="command-body">
        <code># CPU and memory
htop

# Network bandwidth
vnstat -tr 5 -i eth0

# Disk usage
df -h</code>
      </div>
    </div>

    <h3>Common Issues & Fixes</h3>
    <table>
      <tr>
        <th>Issue</th>
        <th>Symptom</th>
        <th>Fix</th>
      </tr>
      <tr>
        <td>No audio</td>
        <td><code>pactl list source-outputs</code> is empty</td>
        <td>Ensure <code>PULSE_SERVER</code> env var is set in service</td>
      </tr>
      <tr>
        <td>Black video</td>
        <td>Stream shows black screen</td>
        <td>Check Chromium launched on correct DISPLAY</td>
      </tr>
      <tr>
        <td>Session sharing</td>
        <td>"Opening in existing browser session"</td>
        <td>Use unique <code>--user-data-dir</code> per stream</td>
      </tr>
      <tr>
        <td>Stream disconnects</td>
        <td>RTMP connection drops</td>
        <td>systemd will auto-restart; check network</td>
      </tr>
      <tr>
        <td>High CPU</td>
        <td>CPU at 100%</td>
        <td>Use <code>ultrafast</code> preset, lower resolution</td>
      </tr>
    </table>
  </section>

  <section id="secrets">
    <h2>Secrets Management</h2>

    <h3>GitHub Repository Secrets</h3>
    <table>
      <tr>
        <th>Secret</th>
        <th>Repos</th>
        <th>Purpose</th>
      </tr>
      <tr>
        <td><code>HETZNER_SSH_KEY</code></td>
        <td>All 3 repos</td>
        <td>SSH private key for server access</td>
      </tr>
      <tr>
        <td><code>LOFI_SERVER_IP</code></td>
        <td>All 3 repos</td>
        <td>Server IP (5.78.42.22)</td>
      </tr>
      <tr>
        <td><code>YOUTUBE_STREAM_KEY</code></td>
        <td>lofi-stream-youtube</td>
        <td>YouTube RTMP stream key</td>
      </tr>
      <tr>
        <td><code>TWITCH_STREAM_KEY</code></td>
        <td>lofi-stream-twitch</td>
        <td>Twitch RTMP stream key</td>
      </tr>
    </table>

    <h3>Server-Side Secrets</h3>
    <p>Stream keys are stored in systemd service files:</p>
    <pre><code># /etc/systemd/system/lofi-stream.service
Environment=YOUTUBE_KEY=xxxx-xxxx-xxxx-xxxx

# /etc/systemd/system/lofi-stream-twitch.service
Environment=TWITCH_KEY=live_xxxxxxxxxx</code></pre>
  </section>

  <footer>
    <p>
      <a href="https://github.com/ldraney/lofi-stream-docs">lofi-stream-docs</a> |
      <a href="https://github.com/ldraney/lofi-stream-youtube">lofi-stream-youtube</a> |
      <a href="https://github.com/ldraney/lofi-stream-twitch">lofi-stream-twitch</a>
    </p>
    <p>Server: 5.78.42.22 | Last updated: December 2024</p>
  </footer>

  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: 'dark',
      themeVariables: {
        primaryColor: '#e94560',
        primaryTextColor: '#eaeaea',
        primaryBorderColor: '#0f3460',
        lineColor: '#a0a0a0',
        secondaryColor: '#16213e',
        tertiaryColor: '#1a1a2e',
        background: '#1a1a2e',
        mainBkg: '#16213e',
        nodeBorder: '#0f3460',
        clusterBkg: '#16213e',
        clusterBorder: '#0f3460',
        titleColor: '#e94560',
        edgeLabelBackground: '#16213e',
        pie1: '#e94560',
        pie2: '#9146ff',
        pie3: '#4ecca3',
        pie4: '#ffc107',
        pie5: '#0f3460',
        pie6: '#2a2a4a',
        pie7: '#16213e'
      },
      flowchart: {
        curve: 'basis',
        padding: 20
      },
      sequence: {
        actorMargin: 50,
        boxMargin: 10
      }
    });
  </script>
</body>
</html>
